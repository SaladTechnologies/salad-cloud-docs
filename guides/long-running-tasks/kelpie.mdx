---
title: 'üêï Kelpie'
description: 'Managing long-running tasks on SaladCloud with Kelpie'
---

_Last Updated: June 06, 2025_

# Managing Long-Running Tasks on SaladCloud with RabbitMQ

Managing long running tasks, such as molecular simulations, dreambooth training, and llm finetuning, presents unique
challenges on SaladCloud, due primarily to the interruptible nature of nodes. At the core of all solutions to this
problem are a job queue, and progress checkpoints. The job queue is responsible for distributing tasks to workers, and
detecting when a worker has been interrupted. Workloads should save checkpoints of their progress and upload it to cloud
storage, so that they can be resumed from the last checkpoint in the event of an interruption. Workers should also
upload completed artifacts to cloud storage.

<Frame caption="Basic architecture for long-running tasks on SaladCloud">
  <img src="/guides/long-running-tasks/images/lrt-basic-arch.png" alt="Basic Architecture" />
</Frame>

[üêï Kelpie](https://github.com/SaladTechnologies/kelpie) is an open-source job queue that is particularly focused on the
challenges of running extremely long tasks on interruptible hardware. It is designed to be simple to instrument, and to
be able to integrate with any containerized workload. It executes scripts in a container according to a job definition,
and optionally handles downloading input data, uploading output data, and syncing progress checkpoints to your
s3-compatible storage. It also provides a mechanism for scaling your container group in response to job volume.

We will use [Cloudflare R2](https://www.cloudflare.com/developer-platform/products/r2/), an S3-compatible object storage
service, as our cloud storage. We prefer R2 to AWS S3 for many SaladCloud workloads, because R2 does not charge for
egress data, and SaladCloud's distributed nodes are not in datacenters, and therefore may incur egress fees from other
providers. Kelpie handles all interactions with the storage service, so your job will only need to write to the local
file system, and Kelpie will take care of uploading the files to R2.

For this guide, we will build an application that slowly calculates a sum for _n_ steps, sleeping for 30 seconds between
steps to simulate work. We will set up a storage bucket and a checkpoint saving system, and enable Kelpie's autoscaling
to handle scaling the number of workers based on the number of jobs in the queue.
